<p id="notice"><%= notice %></p>
<h1>Conferences</h1>

<table class="display data_table" width="100%" cellspacing="0">
  <thead>
    <tr>
        <th>Conference Name</th>
        <th>Year</th>
        <th>Date</th>
        <th>Attenders</th>
        <th>Schedule</th>
        <th>Location</th>
        <th>Report</th>
        <th>News</th>
        <th>Publish</th>
        <th>Edit</th>
        <th>Delete</th>
    </tr>
  </thead>
  <tbody>
      <% @conferences.each do |conference| %>
      <tr id='<%= conference.fullname %>_row'>
          <td><%= link_to conference.name, {controller: 'admin/events', action: 'index', conf_id: conference.id}, class: ''%></td>
          <td><%= conference.year.name %></td>
          <td><%= conference.date %></td>
          <td><%= conference.attenders %></td>
          <td><%= link_to 'Schedule', schedule_admin_conference_path(conference.route), class: ''%></td>
          <td><%= unless(conference.location.nil?)
                    link_to "#{conference.location.address}, #{conference.location.city}", {controller: 'admin/locations', action: 'edit', id: conference.location.id, conf_id: conference.id, conf_fname: conference.fullname}, class: ''
                  else
                    link_to "Create Location", {controller: 'admin/locations', action: 'new', conf_id: conference.id, conf_fname: conference.fullname}, class: 'btn btn-xs btn-primary'
                  end %></td>
          <td><%= unless(conference.report.nil?)
                    link_to "#{conference.report.short_report}", {controller: 'admin/reports', action: 'edit', id: conference.report.id, conf_id: conference.id, conf_fname: conference.fullname}, class: ''
                  else
                    link_to "Create Report", {controller: 'admin/reports', action: 'new', conf_id: conference.id, conf_fname: conference.fullname}, class: 'btn btn-xs btn-primary'
                  end %>
          </td>
          <td><%= unless(conference.news.nil?)
                    link_to "news", {controller: 'admin/news', action: 'index', conf_id: conference.id, conf_fname: conference.fullname}, class: 'btn btn-xs btn-default'
                  else
                    link_to "Create News", {controller: 'admin/news', action: 'new', conf_id: conference.id, conf_fname: conference.fullname}, class: 'btn btn-xs btn-default'
                  end %>
          </td>

          <td class='publish'>

            <% if conference.published %>
              Published
            <% else %>
              <%= link_to 'Publish', publish_admin_conference_path(conference.route), method: :patch, remote: true, class: 'btn btn-xs btn-primary' %>              
            <% end %>
          </td>
          <td><%= link_to 'Edit', edit_admin_conference_path(conference.route), class: 'btn btn-xs btn-warning' %></td>
          <td><%= link_to 'Delete', admin_conference_path(conference.route), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-xs btn-danger' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'New Conference', new_admin_conference_path, class: "btn btn-default btn-sm" %>